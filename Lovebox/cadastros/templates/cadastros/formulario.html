{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastrar</title>
    <!-- Importar o Bootstrap -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- Importar o Font Awesome -->
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
    
</head>
<body>
    <div class="p-4">
        <h3>{{ titulo }}</h3>
        <p class="lead">
            Preencha todos os campos obrigat√≥rios
        </p>
        <hr>

        <form method="POST">
            
            {% csrf_token %}

            {{ form|crispy }}

            <button type="submit" class="btn btn-success">
                {% autoescape off %}
                {{ icone }}
                {% endautoescape %}
                
                Cadastrar
            </button>
        </form>
    </div>

    <!-- A ordem deve ser esta porque ele deve ler primeiro o jQuery -->
    <script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
    <script src="{% static 'js/popper.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>

    {% block scripts %}
    <script src="{% static 'js/jquery.mask.min.js' %}"></script>

    <script>
        $(document).ready(function(){
            var SPMaskBehavior = function (val) {
                return val.replace(/\D/g, '').length === 11 ? '(00) 0 0000-0000' : '(00) 0000-00009';
            },
                spOptions = {
                    onKeyPress: function (val, e, field, options) {
                        field.mask(SPMaskBehavior.apply({}, arguments), options);
                    }
                };

            $('#id_telefone').mask(SPMaskBehavior, spOptions);
            // $("#id_telefone").mask("(00) 0000-0000");
            $("#id_documento").mask("000.000.000-00");
            $("input[id*=data_]").mask("00/00/0000");
            // $("#id_data_nascimento").mask("00/00/0000");

            var crcMask = function (val) {
                return val.replace(/\D/g, '').length === 6 ? '000.000' : '000.009';
            },
                crcOptions = {
                    onKeyPress: function (val, e, field, options) {
                        field.mask(crcMask.apply({}, arguments), options);
                    }
                };

            $("#id_crc").mask(crcMask,crcOptions);

        });

        
    </script>
    {% endblock %}
</body>
</html>